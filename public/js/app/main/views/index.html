<div id="container" ng-class="{'open': opened, '': !opened}">
    <div id="header" ng-style="{ 'background-color': settings.header_color }">
        <div class="status" ng-click="switch()" translate>Support Connected</div>
    </div>
    <div id="content">
        <div id="employee">
            <div ng-show="agent">
                <div class="logo"></div>
                <div class="photo">
                    <img ng-src="{{agent.avatar}}" />
                </div>
                <div class="name">
                    <div class="first-name" ng-bind="agent.first_name"></div>
                    <div class="last-name" ng-bind="agent.last_name"></div>
                </div>
                <div class="post">{{chat.agent.job_title}}</div>
            </div>
        </div>
        <div id="dialogue">
            <div class="content">
                <div class="msg" ng-repeat='message in chat.messages track by $index' ng-class="{'msg-output': message.sender_type == 1, 'msg-input': message.sender_type == 2 || message.sender_type == 3 }">
                    <!-- Сообщение от пользователя -->
                    <div ng-if="message.sender_type == 1">
                        <div class="msg-content-arrow">
                            <div class="msg-content">
                                <div class="msg-content-text">
                                    <div class="msg-date">{{message.created_at * 1000 | date:'shortTime' }}</div>
                                    <div class="msg-user">{{chat.user.first_name || 'Вы'}}</div>
                                    <div class="msg-text">{{message.text}}</div>
                                </div>
                            </div>
                        </div>
                        <div class="msg-photo">
                            <img ng-src="{{user.avatar || '/img/user-photo-default.jpg'}}" width="39px" height="39px" />
                        </div>
                    </div>

                    <!-- Сообщение от оператора -->
                    <div ng-if="message.sender_type == 2">
                        <div class="msg-photo">
                            <img ng-src="{{agent.avatar || '/img/user-photo-default.jpg'}}" width="39px" height="39px" />
                        </div>
                        <div class="msg-content">
                            <div class="msg-content-arrow">
                                <div class="msg-content-text">
                                    <div class="msg-date">{{message.created_at * 1000 | date:'shortTime' }}</div>
                                    <div class="msg-user">{{chat.agent.first_name}}</div>
                                    <div class="msg-text">{{message.text}}</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Сообщение от робота -->
                    <div ng-if="message.sender_type == 3">
                        <div class="msg-photo">
                            <img ng-src="/img/user-photo-default.jpg" width="39px" height="39px" />
                        </div>
                        <div class="msg-content">
                            <div class="msg-content-arrow">
                                <div class="msg-content-text">
                                    <div class="msg-date">{{message.created_at | date:'shortTime' }}</div>
                                    <div class="msg-user">Robot</div>
                                    <div class="msg-text">{{message.text}}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="message-input" ng-class="{'full': isOpened}">
            <div class="message-input-content">
                <textarea ng-model="text" ng-keyup="enter()"></textarea>
                <span class="info-text" ng-click="focus()" ng-bind="input_description" translate></span>
            </div>
            <div class="message-input-content-bg"></div>
        </div>
<!--         <div id="auth" ng-hide="auth">
            <div class="form-item">
                <input type="text" placeholder="Имя" ng-model="user.first_name" />
            </div>
            <div class="form-item">
                <input type="text" placeholder="Почта" ng-model="user.email" />
            </div>
            <div class="form-action">
                <button ng-click="authorization()" translate>OK</button>
            </div>
        </div> -->
    </div>
</div>